* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --accent-cyan: #39e7ff;
    --accent-magenta: #ff3ea5;
    --accent-violet: #8f6bff;
    --border-color: rgba(0, 128, 128, 0.28);
    --card-bg: rgba(2, 22, 22, 0.9);
    --danger-color: #ff4757;
    --navbar-glow-level: 0.55;
    /* 0.25 = sobrio | 0.85 = intenso */
    --neon-cyan: #008080;
    --neon-emerald: #009494;
    --neon-green: #008080;
    --neon-pink: #ff3ea5;
    --navbar-height: 86px;
    --footer-height: 45px;
    --sidebar-width: 60px;
    --sidebar-width-expanded: 200px;
}

/* ========== ESTILOS GLOBALES ========== */
body {
    font-family: 'Orbitron', sans-serif;
    background:
        radial-gradient(circle at 15% 10%, rgba(0, 128, 128, 0.2), transparent 34%),
        radial-gradient(circle at 90% 85%, rgba(0, 255, 255, 0.11), transparent 36%),
        linear-gradient(140deg, #031212, #052525, #0a3030);
    color: #fff;
    min-height: 100dvh;
    overflow-x: clip;
    padding-bottom: 50px;
}

/* space for vertical secondary nav */
.main-content {
    margin-left: 0;
    transition: margin-left 0.3s ease;
    min-height: calc(100vh - 160px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
}

/* Solo aplicar margen si existe el sidebar (usuario logueado) */
body.has-sidebar .main-content {
    margin-left: var(--sidebar-width);
}

body:has(.secondary-nav:hover) .main-content {
    margin-left: var(--sidebar-width-expanded);
}

body.sidebar-open .main-content {
    margin-left: var(--sidebar-width-expanded);
}

body.body-auth-page {
    min-height: 100dvh;
    height: auto;
    overflow-x: clip;
    padding-bottom: 0;
}

body.body-register-page {
    min-height: 100vh;
    height: 100vh;
    overflow: hidden;
    padding-bottom: 0;
}

/* Controles flotantes para manejar el audio de fondo. */
.music-controls {
    position: fixed;
    left: 14px;
    bottom: 14px;
    display: flex;
    gap: 8px;
    z-index: 11000;
    background: rgba(6, 18, 24, 0.8);
    border: 1px solid rgba(143, 233, 230, 0.42);
    border-radius: 10px;
    padding: 7px;
    backdrop-filter: blur(8px);
    align-items: center;
    box-shadow: 0 0 18px rgba(98, 216, 255, 0.16);
}

/* Ocultar controles flotantes si ya tenemos el sidebar (usuario logueado) */
body.has-sidebar .music-controls {
    display: none;
}

.music-toggle-btn {
    order: -1;
}

.music-controls-expanded {
    display: none;
    gap: 8px;
    align-items: center;
}

.music-controls.expanded .music-controls-expanded {
    display: flex;
}

.music-control-btn {
    border: 1px solid rgba(186, 80, 255, 0.65);
    background: rgba(163, 42, 255, 0.18);
    color: #f3ddff;
    border-radius: 6px;
    /* Iconos mas grandes en los botones de volumen. */
    min-width: 42px;
    padding: 8px 10px;
    font-family: inherit;
    font-size: 1.18rem;
    font-weight: 700;
    cursor: pointer;
    text-align: center;
    box-shadow: 0 0 14px rgba(176, 74, 255, 0.4), inset 0 0 10px rgba(210, 145, 255, 0.25);
}

.music-control-btn:hover {
    background: rgba(169, 48, 255, 0.34);
    border-color: rgba(228, 178, 255, 0.95);
    color: #ffffff;
    box-shadow: 0 0 22px rgba(190, 98, 255, 0.62), inset 0 0 12px rgba(230, 182, 255, 0.42);
}

.music-control-btn.is-muted {
    border-color: rgba(255, 99, 99, 0.5);
    color: #ffd1d1;
    background: rgba(255, 99, 99, 0.16);
}

/* Fondo Gamer Animado */
.background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
        linear-gradient(rgba(2, 10, 16, 0.58), rgba(2, 10, 16, 0.62)),
        url('/static/img/panda.png') center center / 38% auto no-repeat,
        linear-gradient(120deg, #021414, #053030, #064545, #021414);
    z-index: -1;
    filter: saturate(1.1);
}

.background::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background:
        radial-gradient(circle at 35% 30%, rgba(0, 128, 128, 0.24) 0%, transparent 62%),
        radial-gradient(circle at 70% 70%, rgba(0, 255, 255, 0.14) 0%, transparent 60%);
    animation: pulse 5s infinite alternate;
    mix-blend-mode: screen;
}

.background::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: repeating-linear-gradient(45deg,
            rgba(57, 231, 255, 0.07),
            rgba(57, 231, 255, 0.07) 2px,
            transparent 2px,
            transparent 10px);
    background-size: auto, 100% 6px;
    animation: moveGrid 10s linear infinite;
    opacity: 0.8;
}

@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

@keyframes pulse {
    0% {
        transform: rotate(0deg) scale(1);
        opacity: 0.3;
    }

    50% {
        transform: rotate(180deg) scale(1.2);
        opacity: 0.5;
    }

    100% {
        transform: rotate(360deg) scale(1);
        opacity: 0.3;
    }
}

@keyframes moveGrid {
    0% {
        transform: translate(0, 0);
    }

    100% {
        transform: translate(50px, 50px);
    }
}

/* Iconos flotantes */
.floating-icons {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
}

.floating-icon {
    position: absolute;
    color: rgba(143, 233, 230, 0.28);
    font-size: 4rem;
    -webkit-text-stroke: 1.2px rgba(0, 0, 0, 0.92);
    text-shadow:
        0 0 8px rgba(0, 0, 0, 0.9),
        0 0 16px rgba(0, 0, 0, 0.65),
        0 0 22px rgba(0, 255, 255, 0.34),
        0 0 30px rgba(0, 128, 128, 0.28);
    animation: floatAround 20s linear infinite, iconPulse 2.7s ease-in-out infinite;
    will-change: transform;
}

.floating-icon:nth-child(1) {
    top: 10%;
    left: 7%;
    animation-name: floatLoopA, iconPulse;
    animation-duration: 10s, 2.2s;
    animation-delay: -3.4s, -0.9s;
    animation-timing-function: linear, ease-in-out;
    animation-iteration-count: infinite, infinite;
    animation-play-state: running, running;
}

.floating-icon:nth-child(2) {
    top: 18%;
    left: 78%;
    animation-name: floatLoopB, iconPulse;
    animation-duration: 14s, 2.6s;
    animation-delay: 0s, 0s;
    animation-timing-function: linear, ease-in-out;
    animation-iteration-count: infinite, infinite;
    animation-play-state: running, running;
}

.floating-icon:nth-child(3) {
    top: 62%;
    left: 12%;
    animation-name: floatLoopC, iconPulse;
    animation-duration: 10.5s, 2.3s;
    animation-delay: -5.2s, -1.1s;
    animation-timing-function: linear, ease-in-out;
    animation-iteration-count: infinite, infinite;
    animation-play-state: running, running;
}

.floating-icon:nth-child(4) {
    top: 70%;
    left: 72%;
    animation-duration: 26s, 3.4s;
    animation-delay: -4.5s, -1.4s;
}

.floating-icon:nth-child(5) {
    top: 42%;
    left: 46%;
    animation-name: floatLoopRocket, iconPulse;
    animation-duration: 11s, 2.2s;
    animation-delay: -4.1s, -0.8s;
    animation-timing-function: linear, ease-in-out;
    animation-iteration-count: infinite, infinite;
    animation-play-state: running, running;
}

.floating-icon:nth-child(6) {
    top: 14%;
    left: 52%;
    animation-duration: 16s, 2.8s;
    animation-delay: -6.2s, -1.3s;
}

.floating-icon:nth-child(7) {
    top: 50%;
    left: 86%;
    animation-duration: 18s, 2.5s;
    animation-delay: -9.4s, -1s;
}

.floating-icon:nth-child(8) {
    top: 78%;
    left: 30%;
    animation-duration: 17s, 2.9s;
    animation-delay: -7.3s, -1.4s;
}

.floating-icon:nth-child(9) {
    top: 28%;
    left: 30%;
    animation-duration: 19s, 3s;
    animation-delay: -10.1s, -1.6s;
}

@keyframes floatAround {
    0% {
        transform: translate(0, 0) rotate(0deg);
    }

    25% {
        transform: translate(100px, 100px) rotate(90deg);
    }

    50% {
        transform: translate(0, 200px) rotate(180deg);
    }

    75% {
        transform: translate(-100px, 100px) rotate(270deg);
    }

    100% {
        transform: translate(0, 0) rotate(360deg);
    }
}

@keyframes iconPulse {

    0%,
    100% {
        opacity: 0.72;
        filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.85));
    }

    50% {
        opacity: 0.95;
        filter: drop-shadow(0 0 14px rgba(0, 0, 0, 0.95)) drop-shadow(0 0 18px rgba(0, 255, 255, 0.35));
    }
}

@keyframes floatLoopA {
    0% {
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    25% {
        transform: translate3d(70px, -36px, 0) rotate(90deg);
    }

    50% {
        transform: translate3d(130px, 44px, 0) rotate(180deg);
    }

    75% {
        transform: translate3d(52px, 110px, 0) rotate(270deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}

@keyframes floatLoopB {
    0% {
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    25% {
        transform: translate3d(-82px, 42px, 0) rotate(95deg);
    }

    50% {
        transform: translate3d(-138px, -28px, 0) rotate(190deg);
    }

    75% {
        transform: translate3d(-48px, -102px, 0) rotate(285deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}

@keyframes floatLoopC {
    0% {
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    25% {
        transform: translate3d(88px, 24px, 0) rotate(88deg);
    }

    50% {
        transform: translate3d(22px, -86px, 0) rotate(176deg);
    }

    75% {
        transform: translate3d(-84px, -32px, 0) rotate(264deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}

@keyframes floatLoopRocket {
    0% {
        transform: translate3d(0, 0, 0) rotate(0deg);
    }

    20% {
        transform: translate3d(84px, -42px, 0) rotate(72deg);
    }

    40% {
        transform: translate3d(142px, 36px, 0) rotate(144deg);
    }

    60% {
        transform: translate3d(46px, 120px, 0) rotate(216deg);
    }

    80% {
        transform: translate3d(-78px, 30px, 0) rotate(288deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotate(360deg);
    }
}